# Minimal PowerDNS Recursor config for PowerBlockade

# Network
local-address=0.0.0.0
local-port=5300
allow-from=172.30.0.0/16, ::1/128

# Performance (tune per host)
threads=2
pdns-distributes-queries=yes

# RPZ
lua-config-file=/etc/pdns-recursor/rpz.lua

# Forward zones
forward-zones-file=/etc/pdns-recursor/forward-zones.conf

# dnstap
# Client-attributed dnstap comes from dnsdist (edge). Disable recursor dnstap to avoid duplicates.
dnstap=no

# API
webserver=yes
webserver-address=0.0.0.0
webserver-port=8082
webserver-allow-from=0.0.0.0/0
api-key=${RECURSOR_API_KEY}

# Prometheus
prometheus-listen-address=0.0.0.0:9090
